(this["webpackJsonpreact-notebook"]=this["webpackJsonpreact-notebook"]||[]).push([[0],{27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);n(22);var r=n(0),a=n.n(r),c=n(19),o=n(9),i=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},l=n(8),s=n(13),u=n(5),d=n(2),b=(n(27),n(1));var f=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("p",{className:"footer__copyright",children:"Notebook. MIT 2021. Armand Philippot."})})};n(29);var j=function(e){var t=e.children;return Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("h1",{className:"header__branding",children:"Notebook"}),t]})};n(30);var h=function(e){var t=e.children;return Object(b.jsx)("main",{className:"main",children:t})};n(31);var O=function(e){var t=e.children,n=e.onClickHandler,r=e.onBlurHandler,a=e.modifier,c=e.additionalClassnames,o=a?"btn btn--".concat(a):"btn";return o=c?"".concat(o," ").concat(c):o,Object(b.jsx)("button",{className:o,onClick:n,onBlur:r,children:t})};function g(e,t){var n=e.type,r=void 0===n?"text":n,a=e.name,c=e.value,o=e.onChangeHandler,i=e.onBlurHandler,l=e.additionalClasses,s=l?"form__input ".concat(l):"form__input";return Object(b.jsx)("input",{ref:t,type:r,name:a,className:s,value:c,onChange:o,onBlur:i})}var m=Object(r.forwardRef)(g);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null!==t&&void 0!==t?t:e.style.height;return e.scrollHeight>e.clientHeight&&(n=e.scrollHeight+"px"),n}function p(e,t){var n=e.value,a=e.name,c=e.onBlurHandler,o=e.onChangeHandler,i=e.additionalClasses,l=Object(r.useState)(),s=Object(u.a)(l,2),d=s[0],f=s[1],j=i?"form__textarea ".concat(i):"form__textarea";return Object(r.useEffect)((function(){t&&f(v(t.current))}),[t]),Object(b.jsx)("textarea",{ref:t,className:j,name:a,value:n,onChange:function(e){o(e),f(v(e.target))},onKeyDown:function(e){(function(e){var t=e.key,n="Backspace"===t,r="Delete"===t,a=e.ctrlKey&&"z"===e.key,c=e.ctrlKey&&"x"===e.key;return n||r||a||c})(e)&&f(v(e.target,"auto"))},onBlur:c,style:{height:d}})}var x=Object(r.forwardRef)(p);n(32);var k=function(e){var t=e.type,n=void 0===t?"ul":t,r=e.data,a=void 0===r?[]:r,c=e.modifier,o=void 0===c?"":c,i=o?"list list--".concat(o):"list",l=a.map((function(e){return Object(b.jsx)("li",{className:"list__item",children:e.body},e.id)}));return Object(b.jsx)(b.Fragment,{children:"ol"===n?Object(b.jsx)("ol",{className:i,children:l}):Object(b.jsx)("ul",{className:i,children:l})})};var y=function(e){var t=e.pages.filter((function(e){return e.id>0})).map((function(e){return{id:e.id,body:Object(b.jsx)(o.c,{activeClassName:"list__link--current",className:"list__link","aria-current":"page",exact:!0,to:e.url,children:e.title},e.id)}}));return Object(b.jsx)(k,{data:t,modifier:"nav"})};n(38);var _=function(e){var t=e.pages,n=e.currentPage,a=e.addNewPage,c=e.isPageExists,i=Object(r.useState)(!1),l=Object(u.a)(i,2),s=l[0],d=l[1],f=function(){return n&&0===n.id};return Object(r.useEffect)((function(){d(!1)}),[n.id]),Object(b.jsxs)("nav",{className:"nav",onBlur:function(e){return!e.relatedTarget&&d(!1)},children:[!f()&&Object(b.jsx)(o.b,{className:"nav__link",to:"/",onClick:function(e){return e.target.blur()},children:"Back to cover"}),!f()&&!(n&&1===n.id)&&c(n.id-1)&&Object(b.jsx)(o.b,{className:"nav__link",to:"/page/".concat(n.id-1),onFocus:function(){return d(!1)},onClick:function(e){return e.target.blur()},children:"Previous page"}),Object(b.jsx)(O,{additionalClassnames:"nav__link",onClickHandler:function(){return d(!s)},children:"Jump to"}),s&&Object(b.jsx)(y,{pages:t}),!(n&&null===n.id)&&Object(b.jsx)(o.b,{className:"nav__link",to:"/page/".concat(n.id+1),onClick:function(e){!c(n.id+1)&&a(),e.target.blur()},onFocus:function(){return d(!1)},children:"Next page"})]})};var N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.useState)(e),n=Object(u.a)(t,2),a=n[0],c=n[1],o=Object(r.useCallback)((function(){return c((function(e){return!e}))}),[]);return[a,o]};function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var C=r.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:4,id:"trash-lid-handle",d:"M 39.999977,2.0049906 A 10.941541,10.901606 0 0 0 29.380829,10.392059 c 6.823427,-0.19706 14.435517,-0.202894 21.257435,-0.01905 A 10.941541,10.901606 0 0 0 39.999977,2.00502 Z M 39.865976,23.799924 a 10.941541,10.901606 0 0 0 0.134001,0.0096 10.941541,10.901606 0 0 0 0.358917,-0.0096 z"}),E=r.createElement("path",{fill:"#ffffff",stroke:"#000000",strokeWidth:4,id:"trash-container",d:"m 15.029909,24.102259 h 49.940182 v 53.89774 H 15.029909 Z"}),H=r.createElement("path",{fill:"#ffffff",stroke:"#000000",strokeWidth:4,id:"trash-lid",d:"m 70.398893,12.759297 c 0,3.026127 0,11.039803 0,11.039803 H 9.601107 c 0,0 0,-7.816365 0,-11.039803 0,-3.2958374 60.797786,-3.4333596 60.797786,0 z"}),S=r.createElement("rect",{fill:"#000000",id:"trash-stroke1",width:3.0539479,height:32.859192,x:23.934427,y:34.621532}),B=r.createElement("rect",{fill:"#000000",id:"trash-stroke2",width:3.0539479,height:32.859192,x:38.47303,y:34.621532}),I=r.createElement("rect",{fill:"#000000",id:"trash-stroke3",width:3.0539479,height:32.859192,x:53.011623,y:34.621532});function F(e,t){var n=e.title,a=e.titleId,c=w(e,["title","titleId"]);return r.createElement("svg",P({width:80,height:80,viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,C,E,H,S,B,I)}var M=r.forwardRef(F);n.p;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var J=r.createElement("path",{id:"restore-circle",d:"M 43.267598,3.2675985 C 23.008066,3.2675985 6.5351966,19.740468 6.5351966,40 c 0,0.171468 0.00482,0.342043 0.00717,0.512962 h 4.5915504 c -0.0027,-0.170945 -0.0072,-0.341371 -0.0072,-0.512962 0,-17.778077 14.362775,-32.1408513 32.140851,-32.1408513 17.778077,0 32.140852,14.3627743 32.140852,32.1408513 0,17.778076 -14.362775,32.140851 -32.140852,32.140851 -8.338958,0 -15.925965,-3.160587 -21.6323,-8.350881 H 15.300394 C 22.042368,71.704396 32.076566,76.732402 43.267598,76.732402 63.52713,76.732402 80,60.259532 80,40 80,19.740468 63.52713,3.2675985 43.267598,3.2675985 Z"}),T=r.createElement("path",{id:"restore-arrow",d:"m 17.457497,40.45113 h -17.45749705 L 8.7287481,50.692775 Z"}),Z=r.createElement("rect",{id:"restore-first-clock-hand",width:5,height:20,x:37.5,y:22.075739}),z=r.createElement("rect",{id:"restore-second-clock-hand",width:5,height:20,x:1.6809042,y:56.336418,transform:"rotate(-40)"});function A(e,t){var n=e.title,a=e.titleId,c=D(e,["title","titleId"]);return r.createElement("svg",R({viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,J,T,Z,z)}var K=r.forwardRef(A);n.p;var L=function(e){var t=e.removePage,n=e.restorePage,r=e.deletedPages;return Object(b.jsxs)("div",{className:"notebook-page__toolbar toolbar",children:[Object(b.jsx)("div",{className:"toolbar__item",children:r.length>0&&Object(b.jsx)(O,{modifier:"restore",onClickHandler:n,children:Object(b.jsx)(K,{title:"Undo page deletion",className:"icon icon--restore"})})}),Object(b.jsx)("div",{className:"toolbar__item",children:Object(b.jsx)(O,{modifier:"delete",onClickHandler:t,children:Object(b.jsx)(M,{title:"Delete this page",className:"icon icon--trash"})})})]})};n(39),n(40);var W=function(e){var t=e.page,n=e.setPage,a=e.removePage,c=e.restorePage,o=e.deletedPages,i=N(),s=Object(u.a)(i,2),d=s[0],f=s[1],j=N(),h=Object(u.a)(j,2),O=h[0],g=h[1],v=Object(r.useRef)(null),p=Object(r.useRef)(null),k=function(){return t&&0===t.id},y=function(){return t&&null===t.id};Object(r.useEffect)((function(){v.current&&v.current.focus(),p.current&&p.current.focus()}));var _=function(e){e.preventDefault()},P=function(e){var t={};switch(e.target.name){case"notebook-title":t={title:e.target.value};break;case"notebook-body":t={body:e.target.value}}n((function(e){return Object(l.a)(Object(l.a)({},e),t)}))};return Object(b.jsxs)("article",{className:"notebook-page ".concat(k()?"notebook-page--cover":""),children:[Object(b.jsxs)("header",{className:"notebook-page__header",children:[!d&&Object(b.jsx)("h2",{className:"notebook-page__title",onClick:function(){y()||f()},children:t.title}),d&&Object(b.jsx)("form",{className:"notebook-page__title",onSubmit:_,children:Object(b.jsx)(m,{ref:v,name:"notebook-title",value:t.title,onChangeHandler:P,onBlurHandler:f})})]}),!O&&Object(b.jsx)("div",{className:"notebook-page__content",onClick:function(){y()||g()},children:t.body}),O&&Object(b.jsx)("form",{className:"notebook-page__content",onSubmit:_,children:Object(b.jsx)(x,{ref:p,name:"notebook-body",value:t.body,onChangeHandler:P,onBlurHandler:g})}),Object(b.jsxs)("footer",{className:"notebook-page__footer",children:[!k()&&Object(b.jsx)("div",{className:"notebook-page__number",children:t.id}),!k()&&Object(b.jsx)(L,{removePage:a,restorePage:c,deletedPages:o})]})]})},U=[{id:null,body:"",title:"Page not found",url:"/404"},{id:0,body:"",title:"My Notebook",url:"/"}],q=(n(41),0);var G=function(){var e=JSON.parse(localStorage.getItem("notebook-pages")),t=e||U,n=Object(r.useState)(t),a=Object(u.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)({}),O=Object(u.a)(i,2),g=O[0],m=O[1],v=Object(r.useState)([]),p=Object(u.a)(v,2),x=p[0],k=p[1],y=Object(d.g)();q=e?e.at(e.length-1).id:q;var N=Object(r.useCallback)((function(e){return-1!==c.findIndex((function(t){return t.id===e}))}),[c]),P=Object(r.useCallback)((function(){var e={id:++q,body:"",title:"Page ".concat(q),url:"/page/".concat(q)};o((function(t){return[].concat(Object(s.a)(t),[e])}))}),[]),w=Object(r.useCallback)((function(){var e=g.id,t=c.slice(0),n=c.findIndex((function(t){return t.id===e}));k((function(e){return[].concat(Object(s.a)(e),[g])})),t.splice(n,1);var r=t.map((function(t){if(t.id<=e)return t;var n=t.id-1,r="/page/".concat(n);return Object(l.a)(Object(l.a)({},t),{},{id:n,url:r})}));m.apply(void 0,Object(s.a)(r.filter((function(t){return t.id===e})))),o(r),q-=1}),[c,g]),C=Object(r.useCallback)((function(){var e=x.pop(),t=c.slice(0),n=t.findIndex((function(t){return t.id===e.id})),r=t.map((function(t){if(t.id<e.id)return t;var n=t.id+1,r="/page/".concat(n);return Object(l.a)(Object(l.a)({},t),{},{id:n,url:r})}));r.splice(n,0,e),m.apply(void 0,Object(s.a)(r.filter((function(t){return t.id===e.id})))),o(r)}),[c,x]);return Object(r.useEffect)((function(){!N(1)&&P()}),[N,P]),Object(r.useEffect)((function(){var e=c.find((function(e){return e.url===y.pathname}));m(e||function(){return c.find((function(e){return"/404"===e.url}))})}),[y.pathname,c]),Object(r.useEffect)((function(){g&&(document.title="Notebook - ".concat(g.title))}),[g]),Object(r.useEffect)((function(){o((function(e){return e.map((function(e){return e.id!==g.id?e:Object(l.a)(Object(l.a)({},e),{},{body:g.body})}))}))}),[g.id,g.body]),Object(r.useEffect)((function(){o((function(e){return e.map((function(e){return e.id!==g.id?e:Object(l.a)(Object(l.a)({},e),{},{title:g.title})}))}))}),[g.id,g.title]),Object(r.useEffect)((function(){localStorage.setItem("notebook-pages",JSON.stringify(c))}),[c]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(j,{}),Object(b.jsxs)(h,{children:[Object(b.jsxs)("div",{className:"notebook ".concat(g&&0===g.id?"notebook--cover":""),children:[Object(b.jsx)("div",{className:"notebook-page notebook-page--mirror"}),Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{exact:!0,strict:!0,path:"/page/:number",render:function(e){var t=parseInt(e.match.params.number,10);return 0===t?Object(b.jsx)(d.a,{to:"/"}):N(t)?Object(b.jsx)(W,{page:g,setPage:m,removePage:w,restorePage:C,deletedPages:x}):Object(b.jsx)(d.a,{to:"/404"})}}),Object(b.jsx)(d.b,{exact:!0,strict:!0,path:["/404","/"],children:Object(b.jsx)(W,{page:g,setPage:m,removePage:w,restorePage:C,deletedPages:x})}),Object(b.jsx)(d.b,{path:"*",children:Object(b.jsx)(d.a,{to:"/404"})})]})]}),Object(b.jsx)(_,{pages:c,currentPage:g,addNewPage:P,isPageExists:N})]}),Object(b.jsx)(f,{})]})};Object(c.render)(Object(b.jsx)(o.a,{children:Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(G,{})})}),document.getElementById("app")),i()}},[[42,1,2]]]);
//# sourceMappingURL=main.f3ae4b56.chunk.js.map